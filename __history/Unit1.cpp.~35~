//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop
#include <string.h>
#include <iostream>
#include<fstream>

#include "Unit1.h"
#include "Unit2.h"
using namespace std;
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
TLabel *L;
TPanel *P;
TEdit *E;
vector <Note> notes;
//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner): TForm(Owner)
{
//
}

void __fastcall TForm1::Edit1Click(TObject *Sender)
{
	Edit1 -> Text = "";
}
//---------------------------------------------------------------------------

void __fastcall TForm1::DeleteNoteClick(TObject *Sender)
{
//
}
//---------------------------------------------------------------------------



void __fastcall TForm1::ClearClick(TObject *Sender)
{
	for (int i = 0; i < ListView1->Items->Count; i++) {
		ListView1 -> Items->Item[i]->Checked = false;
	}
	ListView1-> Checkboxes = false;
}
//---------------------------------------------------------------------------

void __fastcall TForm1::ChooseNoteClick(TObject *Sender)
{
	ListView1-> Checkboxes = true;
}
//---------------------------------------------------------------------------


void __fastcall TForm1::AddNoteClick(TObject *Sender)
{
	Form2->Visible=true;
}
//---------------------------------------------------------------------------



void __fastcall TForm1::loadClick(TObject *Sender)
{
	/*int itCount = 0;
	FILE *file;
	file = fopen("Notes.txt","r");
	int i;
	i = 0;

	while (!feof(file))
		{
		  fscanf(file, "%s",notes[itCount].name);
		  fscanf(file, "%s",notes[itCount].text);

		  ListIt = ListView1->Items->Add();
		  ListIt -> Caption = notes[itCount].name;
		  ListIt -> SubItems -> Add(notes[itCount].text);
		  itCount++;
		}

		fclose(file);         */



	ifstream F;
	string name, text;
	F.open("Notes.txt");
	int itCount = 0;
	while ((F.is_open())&&(!F.eof()))
			{
				F >> name;
				F >> text;
				notes.push_back(Note(name,text));

				ListIt = ListView1->Items->Add();
				ListIt	-> Caption = notes[itCount].name.c_str();
				ListIt -> SubItems -> Add(notes[itCount].text.c_str());
				itCount++;
			}

		F.close();
}
//---------------------------------------------------------------------------

void __fastcall TForm1::saveClick(TObject *Sender)
{
  /*	FILE *file;
	file = fopen("Notes.txt","w");
	if(!feof(file))
		{
			for (int i=0; i < ListView1->Items->Count; i++) {
			fprintf(file, "%s\n",notes[i].name);
			fprintf(file, "%s",notes[i].text);
			}
		}
		fclose(file);         */




	ofstream F;
	F.open("Notes.txt");
	if(!F.eof())
		{
			for (int i=0; i < ListView1->Items->Count; i++) {

			F << notes[i].name<<endl;
			F << notes[i].text;
			}
		}
		F.close();
}
//---------------------------------------------------------------------------

